<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gallery — Don't Smile</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Cinzel:wght@300;400&display=swap&font-display=swap" rel="stylesheet"/>

  <meta property="og:type"         content="website"/>
  <meta property="og:title"        content="Don't Smile — The Lyric Gallery"/>
  <meta property="og:description"  content="Sabrina Carpenter · Short n' Sweet · 2024. An intimate gallery experience for a song about refusing tidy resolutions."/>
  <meta name="description"  content="An immersive gallery experience for Don't Smile by Sabrina Carpenter."/>
  <meta name="theme-color"  content="#ece8f8"/>

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --pearl:           #f8f4ff;
      --platinum:        #e8e4f0;
      --silver-soft:     #ddd8ee;
      --cotton-pink:     #f7d6e8;
      --cotton-blue:     #d6e8f7;
      --cotton-lavender: #e0d4f5;
      --cotton-mint:     #d4f0e8;
      --cotton-peach:    #f7e4d4;
      --gold-accent:     #d4c4a0;
      --text-dark:       #2a1f3d;
      --text-mid:        #5a4a78;
      --text-light:      #9888bb;
    }

    html { scroll-behavior: smooth; }
    * { cursor: none !important; }

    /* ── CUSTOM CURSOR ── */
    #cursor-orb {
      position: fixed; width: 22px; height: 22px;
      border-radius: 50%; pointer-events: none; z-index: 9999;
      transform: translate(-50%, -50%);
      background: radial-gradient(circle at 38% 35%,
        rgba(255,255,255,0.95) 0%, rgba(235,215,255,0.75) 35%,
        rgba(210,190,240,0.45) 65%, transparent 100%);
      box-shadow:
        0 0 12px 4px rgba(230,210,255,0.55),
        0 0 30px 8px rgba(210,185,245,0.25),
        inset 0 1px 3px rgba(255,255,255,0.9);
      transition: transform 0.08s ease, width 0.25s ease, height 0.25s ease, opacity 0.25s ease;
    }
    #cursor-orb.hovered { width: 38px; height: 38px; opacity: 0.7; }
    #cursor-trail {
      position: fixed; width: 8px; height: 8px;
      border-radius: 50%; pointer-events: none; z-index: 9998;
      transform: translate(-50%, -50%);
      background: rgba(220,200,255,0.4);
      box-shadow: 0 0 8px 3px rgba(220,200,255,0.25);
      transition: left 0.18s ease, top 0.18s ease, opacity 0.3s ease;
    }

    /* ── PROGRESS BAR ── */
    #progress-bar {
      position: fixed; top: 0; left: 0;
      width: 0%; height: 3px; z-index: 9000;
      background: linear-gradient(to right,
        rgba(255,220,240,0.9), rgba(200,185,240,0.95),
        rgba(185,215,255,0.9), rgba(210,240,220,0.85), rgba(255,220,240,0.9));
      background-size: 200% 100%;
      animation: barShimmer 3s linear infinite;
      box-shadow: 0 0 8px rgba(210,190,255,0.6), 0 0 20px rgba(200,180,255,0.3);
      transition: width 0.1s linear;
    }
    @keyframes barShimmer {
      0%   { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* ── BODY ── */
    body {
      background-color: #ece8f8;
      font-family: 'Cormorant Garamond', serif;
      color: var(--text-dark);
      overflow-x: hidden;
    }

    /* ── SVG FILTERS ── */
    #svg-filters { position: fixed; width: 0; height: 0; overflow: hidden; }

    /* ═══════════════════════════════════════════
       GRAIN OVERLAY — NEW
       Adds physical, tactile depth to the whole page.
       The grain sits above backgrounds but below content.
    ═══════════════════════════════════════════ */
    #grain-overlay {
      position: fixed; inset: 0; z-index: 7; pointer-events: none;
      opacity: 0.032;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
      background-size: 180px 180px;
      mix-blend-mode: multiply;
      animation: grainDrift 0.8s steps(2) infinite;
    }
    @keyframes grainDrift {
      0%   { background-position: 0 0; }
      25%  { background-position: 12px -8px; }
      50%  { background-position: -6px 14px; }
      75%  { background-position: 9px 5px; }
      100% { background-position: 0 0; }
    }

    /* ── VIGNETTE — NEW ── */
    #vignette {
      position: fixed; inset: 0; z-index: 6; pointer-events: none;
      background: radial-gradient(ellipse 90% 85% at 50% 50%,
        transparent 50%, rgba(30,20,55,0.18) 100%);
    }

    /* ── BACKGROUND LAYERS ── */
    .bg-water {
      position: fixed; inset: 0; z-index: 0;
      background:
        radial-gradient(ellipse 110% 80% at 15% 20%,  #f5eeff 0%, #e8e0f8 40%, transparent 70%),
        radial-gradient(ellipse 80%  90% at 85% 75%,  #fde8f4 0%, #f0d8ee 50%, transparent 75%),
        radial-gradient(ellipse 60%  50% at 50% 50%,  #eaf4ff 0%, transparent 65%),
        radial-gradient(ellipse 100% 60% at 30% 85%,  #fdf0f8 0%, #f5e8f8 45%, transparent 70%),
        radial-gradient(ellipse 70%  40% at 70% 10%,  #eaf8f4 0%, #e8f0fc 50%, transparent 70%),
        linear-gradient(155deg, #fdf0ff 0%, #eee8ff 20%, #f8f0fa 40%, #eaf8ff 60%, #fff0f5 80%, #f5f0ff 100%);
      transition: transform 0.8s cubic-bezier(0.25,0.46,0.45,0.94);
    }
    .bg-caustics {
      position: fixed; inset: 0; z-index: 1;
      background:
        radial-gradient(ellipse 28% 18% at 22% 18%,  rgba(255,255,255,0.95) 0%, rgba(255,248,255,0.5) 40%, transparent 70%),
        radial-gradient(ellipse 18% 30% at 55% 35%,  rgba(255,255,255,0.88) 0%, rgba(245,255,252,0.4) 45%, transparent 70%),
        radial-gradient(ellipse 22% 14% at 78% 22%,  rgba(255,255,255,0.80) 0%, transparent 65%),
        radial-gradient(ellipse 35% 20% at 40% 60%,  rgba(255,255,255,0.90) 0%, rgba(255,250,255,0.4) 40%, transparent 68%),
        radial-gradient(ellipse 16% 26% at 80% 65%,  rgba(255,255,255,0.75) 0%, transparent 60%),
        radial-gradient(ellipse 24% 15% at 10% 72%,  rgba(255,255,255,0.82) 0%, rgba(250,255,255,0.35) 45%, transparent 68%),
        radial-gradient(ellipse 20% 12% at 60% 85%,  rgba(255,255,255,0.70) 0%, transparent 60%),
        radial-gradient(ellipse 12% 22% at 35% 42%,  rgba(255,255,255,0.65) 0%, transparent 58%);
      filter: url(#ripple) blur(0.5px);
      mix-blend-mode: screen;
      animation: causticDrift 18s ease-in-out infinite alternate;
      transition: transform 0.6s cubic-bezier(0.25,0.46,0.45,0.94);
    }
    .bg-iridescent {
      position: fixed; inset: 0; z-index: 2;
      background:
        radial-gradient(ellipse 40% 25% at 25% 22%,  rgba(255,200,230,0.40) 0%, transparent 60%),
        radial-gradient(ellipse 30% 18% at 58% 38%,  rgba(190,230,255,0.38) 0%, transparent 55%),
        radial-gradient(ellipse 25% 35% at 75% 60%,  rgba(255,230,200,0.35) 0%, transparent 58%),
        radial-gradient(ellipse 45% 20% at 38% 62%,  rgba(200,240,220,0.35) 0%, transparent 55%),
        radial-gradient(ellipse 20% 30% at 12% 50%,  rgba(230,200,255,0.38) 0%, transparent 52%),
        radial-gradient(ellipse 30% 20% at 65% 88%,  rgba(255,210,240,0.35) 0%, transparent 55%),
        radial-gradient(ellipse 35% 18% at 88% 15%,  rgba(200,235,255,0.32) 0%, transparent 50%),
        radial-gradient(ellipse 28% 22% at 50% 5%,   rgba(255,215,235,0.30) 0%, transparent 55%);
      mix-blend-mode: multiply;
      animation: iridescentShift 22s ease-in-out infinite alternate;
      filter: blur(18px);
      transition: transform 0.5s cubic-bezier(0.25,0.46,0.45,0.94);
    }
    .bg-silver {
      position: fixed; inset: 0; z-index: 1;
      background:
        radial-gradient(ellipse 35% 22% at 45% 28%, rgba(210,205,235,0.55) 0%, transparent 65%),
        radial-gradient(ellipse 25% 30% at 68% 50%, rgba(220,215,240,0.45) 0%, transparent 62%),
        radial-gradient(ellipse 28% 20% at 20% 60%, rgba(205,215,230,0.48) 0%, transparent 60%),
        radial-gradient(ellipse 20% 25% at 85% 35%, rgba(215,210,235,0.42) 0%, transparent 58%),
        radial-gradient(ellipse 30% 18% at 60% 75%, rgba(225,218,245,0.40) 0%, transparent 60%);
      mix-blend-mode: luminosity;
      animation: silverBreath 14s ease-in-out infinite alternate;
    }
    .bg-hueshift {
      position: fixed; inset: 0; z-index: 3; pointer-events: none;
      mix-blend-mode: soft-light;
      background: linear-gradient(135deg,
        rgba(255,210,240,0.25) 0%, rgba(210,240,255,0.20) 35%,
        rgba(240,255,220,0.18) 65%, rgba(255,220,245,0.22) 100%);
      animation: hueWave 35s linear infinite;
    }
    .bg-glow {
      position: fixed; inset: 0; z-index: 4; pointer-events: none;
      background:
        radial-gradient(ellipse 60% 50% at 50% 45%, rgba(255,255,255,0.30) 0%, transparent 70%),
        radial-gradient(ellipse 100% 100% at 50% 50%, transparent 55%, rgba(200,185,225,0.20) 100%);
    }

    @keyframes causticDrift {
      0%   { filter: url(#ripple)  blur(0.5px); opacity: 0.85; transform: scale(1) translate(0,0); }
      25%  { filter: url(#ripple2) blur(0.8px); opacity: 1;    transform: scale(1.02) translate(-8px,-5px); }
      50%  { filter: url(#ripple)  blur(0.4px); opacity: 0.90; transform: scale(0.99) translate(6px,8px); }
      75%  { filter: url(#ripple3) blur(0.9px); opacity: 1;    transform: scale(1.03) translate(-4px,4px); }
      100% { filter: url(#ripple2) blur(0.6px); opacity: 0.88; transform: scale(1) translate(5px,-6px); }
    }
    @keyframes iridescentShift {
      0%   { filter: blur(18px) hue-rotate(0deg);   opacity: 0.80; }
      20%  { filter: blur(22px) hue-rotate(18deg);  opacity: 1; }
      45%  { filter: blur(15px) hue-rotate(-12deg); opacity: 0.85; }
      70%  { filter: blur(20px) hue-rotate(30deg);  opacity: 0.95; }
      100% { filter: blur(18px) hue-rotate(8deg);   opacity: 0.80; }
    }
    @keyframes silverBreath {
      0%   { opacity: 0.6; transform: translate(0,0); }
      50%  { opacity: 0.9; transform: translate(-6px,8px); }
      100% { opacity: 0.65; transform: translate(5px,-5px); }
    }
    @keyframes hueWave {
      0%   { filter: hue-rotate(0deg) brightness(1.02); }
      50%  { filter: hue-rotate(25deg) brightness(1.05); }
      100% { filter: hue-rotate(0deg) brightness(1.02); }
    }

    /* ── PARTICLES CANVAS ── */
    #particles-canvas { position: fixed; inset: 0; z-index: 5; pointer-events: none; }

    /* ═══════════════════════════════════════════
       SPLASH SCREEN
    ═══════════════════════════════════════════ */
    #splash {
      position: fixed; inset: 0; z-index: 8000;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      text-align: center; padding: 2rem;
      transition: opacity 1.4s cubic-bezier(0.4,0,0.2,1), visibility 1.4s;
    }
    #splash.hidden { opacity: 0; visibility: hidden; pointer-events: none; }

    /* ── Soft radial spotlight behind splash content ── */
    #splash::before {
      content: '';
      position: absolute; inset: 0;
      background: radial-gradient(ellipse 80% 70% at 50% 50%,
        rgba(255,255,255,0.55) 0%, transparent 70%);
      pointer-events: none;
    }

    /* ── NEW: subtle ring-pulse behind splash title ── */
    #splash-ring {
      position: absolute;
      width: 420px; height: 420px;
      border-radius: 50%;
      top: 50%; left: 50%;
      transform: translate(-50%, -58%);
      pointer-events: none;
      border: 1px solid rgba(200,185,240,0.18);
      animation: ringPulse 6s ease-in-out infinite;
    }
    #splash-ring::before, #splash-ring::after {
      content: '';
      position: absolute; inset: -28px;
      border-radius: 50%;
      border: 1px solid rgba(200,185,240,0.10);
      animation: ringPulse 6s ease-in-out 1s infinite;
    }
    #splash-ring::after {
      inset: -56px;
      animation-delay: 2s;
    }
    @keyframes ringPulse {
      0%, 100% { opacity: 0.4; transform: scale(1); }
      50%       { opacity: 0.9; transform: scale(1.04); }
    }

    .splash-eyebrow {
      font-family: 'Cinzel', serif; font-size: 0.62rem;
      letter-spacing: 0.42em; color: var(--text-light);
      text-transform: uppercase; margin-bottom: 2.8rem;
      opacity: 0; animation: splashFade 1.2s ease 0.4s forwards;
      position: relative; z-index: 1;
    }
    .splash-title {
      font-size: clamp(3rem, 9vw, 7.5rem);
      font-weight: 300; font-style: italic;
      line-height: 1.05; letter-spacing: 0.04em;
      color: var(--text-dark);
      background: linear-gradient(
        105deg,
        var(--text-dark) 20%, rgba(255,255,255,0.95) 45%,
        rgba(220,205,255,0.9) 50%, rgba(255,255,255,0.95) 55%,
        var(--text-dark) 80%);
      background-size: 250% auto;
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: splashFade 1.4s ease 0.7s forwards, titleShimmer 5s linear 2s infinite;
      opacity: 0; margin-bottom: 1.5rem;
      position: relative; z-index: 1;
    }
    .splash-sub {
      font-family: 'Cinzel', serif; font-size: 0.72rem;
      letter-spacing: 0.28em; color: var(--text-mid);
      text-transform: uppercase; opacity: 0;
      animation: splashFade 1.2s ease 1.1s forwards;
      margin-bottom: 5rem; position: relative; z-index: 1;
    }
    .splash-enter {
      font-family: 'Cinzel', serif; font-size: 0.6rem;
      letter-spacing: 0.35em; color: var(--text-light);
      text-transform: uppercase; opacity: 0;
      animation: splashFade 1s ease 2s forwards, pulseOpacity 2.5s ease 2.8s infinite;
      padding: 1rem 2.4rem;
      border: 1px solid rgba(185,170,220,0.35);
      background: rgba(255,252,255,0.3);
      backdrop-filter: blur(10px);
      transition: background 0.3s ease, border-color 0.3s ease, letter-spacing 0.3s ease;
      position: relative; z-index: 1;
    }
    /* NEW: subtle expand on hover */
    .splash-enter:hover {
      background: rgba(255,252,255,0.55);
      border-color: rgba(210,190,240,0.55);
      letter-spacing: 0.42em;
    }

    @keyframes splashFade {
      from { opacity: 0; transform: translateY(14px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    @keyframes pulseOpacity {
      0%, 100% { opacity: 0.6; } 50% { opacity: 1; }
    }
    @keyframes titleShimmer {
      0%   { background-position: 250% center; }
      100% { background-position: -250% center; }
    }

    /* ── PAGE ── */
    #page {
      position: relative; z-index: 10;
      min-height: 100vh; opacity: 0;
      transition: opacity 1.2s ease 0.3s;
    }
    #page.visible { opacity: 1; }

    /* ── MUSEUM HEADER ── */
    .museum-header {
      position: fixed; top: 0; left: 0; right: 0; z-index: 200;
      display: flex; align-items: center;
      padding: 1.4rem 3rem;
      backdrop-filter: blur(20px) saturate(1.6) brightness(1.08);
      -webkit-backdrop-filter: blur(20px) saturate(1.6) brightness(1.08);
      background: rgba(255,250,255,0.40);
      border-bottom: 1px solid rgba(210,195,235,0.35);
      /* NEW: very subtle bottom shadow for depth separation */
      box-shadow: 0 1px 20px rgba(180,160,220,0.08);
    }
    .museum-name {
      font-family: 'Cinzel', serif; font-size: 0.68rem; font-weight: 300;
      letter-spacing: 0.25em; color: var(--text-light); text-transform: uppercase;
    }
    .header-rule {
      flex: 1; height: 1px;
      background: linear-gradient(to right, transparent, rgba(190,175,220,0.45), transparent);
      margin: 0 2rem;
    }
    .header-nav {
      font-family: 'Cinzel', serif; font-size: 0.62rem;
      letter-spacing: 0.2em; color: var(--text-light); text-transform: uppercase;
    }

    /* ═══════════════════════════════════════════
       HERO — enhanced with aurora glow ring
    ═══════════════════════════════════════════ */
    .hero {
      min-height: 100vh;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      padding: 8rem 2rem 4rem;
      text-align: center; position: relative; overflow: hidden;
    }

    /* NEW: aurora blob behind the hero text — soft, drifting, multicolour */
    .hero-aurora {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -52%);
      width: clamp(300px, 55vw, 640px);
      height: clamp(200px, 35vw, 420px);
      border-radius: 50%;
      pointer-events: none;
      background: radial-gradient(ellipse 60% 55% at 38% 48%,
        rgba(255,210,235,0.50) 0%,
        rgba(215,195,255,0.40) 35%,
        rgba(195,225,255,0.30) 65%,
        transparent 100%);
      filter: blur(42px);
      animation: auroraBreath 8s ease-in-out infinite alternate;
      z-index: 0;
    }
    @keyframes auroraBreath {
      0%   { transform: translate(-50%,-52%) scale(1)    rotate(0deg);  opacity: 0.7; filter: blur(42px) hue-rotate(0deg); }
      30%  { transform: translate(-50%,-52%) scale(1.06) rotate(3deg);  opacity: 1;   filter: blur(38px) hue-rotate(12deg); }
      65%  { transform: translate(-50%,-52%) scale(0.96) rotate(-4deg); opacity: 0.8; filter: blur(48px) hue-rotate(-8deg); }
      100% { transform: translate(-50%,-52%) scale(1.03) rotate(2deg);  opacity: 0.9; filter: blur(44px) hue-rotate(18deg); }
    }

    .exhibit-label {
      font-family: 'Cinzel', serif; font-size: 0.62rem;
      letter-spacing: 0.42em; color: var(--text-light);
      text-transform: uppercase; margin-bottom: 3rem;
      opacity: 0; animation: heroFade 1.2s ease 0.3s forwards;
      position: relative; z-index: 1;
    }
    .hero-title {
      font-size: clamp(1.4rem, 3.2vw, 2.6rem);
      font-weight: 300; font-style: italic;
      line-height: 1.2; letter-spacing: 0.12em;
      color: var(--text-mid);
      margin-bottom: 1.6rem;
      opacity: 0; animation: heroFade 1.4s ease 0.55s forwards;
      position: relative; z-index: 1;
    }
    .hero-divider {
      width: 28px; height: 1px;
      background: linear-gradient(to right, transparent, rgba(185,170,220,0.6), transparent);
      margin: 0 auto 1.4rem;
      opacity: 0; animation: heroFade 1.2s ease 0.72s forwards;
      position: relative; z-index: 1;
    }
    .hero-artist {
      font-family: 'Cinzel', serif; font-size: 0.7rem;
      letter-spacing: 0.28em; color: var(--text-light);
      text-transform: uppercase; margin-bottom: 0.45rem;
      opacity: 0; animation: heroFade 1.2s ease 0.88s forwards;
      position: relative; z-index: 1;
    }
    .hero-year {
      font-size: 0.78rem; color: var(--text-light);
      letter-spacing: 0.12em; opacity: 0;
      animation: heroFade 1.2s ease 1.05s forwards;
      position: relative; z-index: 1;
    }

    /* NEW: audio waveform decorative element below year */
    .hero-waveform {
      display: flex; align-items: center; justify-content: center;
      gap: 3px; margin-top: 3rem;
      opacity: 0; animation: heroFade 1.2s ease 1.3s forwards;
      position: relative; z-index: 1;
    }
    .hero-waveform .bar {
      width: 2px;
      border-radius: 2px;
      background: linear-gradient(to top, rgba(185,170,220,0.3), rgba(215,195,255,0.7));
      animation: waveBar 1.4s ease-in-out infinite alternate;
    }
    .hero-waveform .bar:nth-child(1)  { height: 8px;  animation-delay: 0.0s; }
    .hero-waveform .bar:nth-child(2)  { height: 16px; animation-delay: 0.1s; }
    .hero-waveform .bar:nth-child(3)  { height: 22px; animation-delay: 0.2s; }
    .hero-waveform .bar:nth-child(4)  { height: 12px; animation-delay: 0.3s; }
    .hero-waveform .bar:nth-child(5)  { height: 28px; animation-delay: 0.15s; }
    .hero-waveform .bar:nth-child(6)  { height: 18px; animation-delay: 0.25s; }
    .hero-waveform .bar:nth-child(7)  { height: 32px; animation-delay: 0.05s; }
    .hero-waveform .bar:nth-child(8)  { height: 24px; animation-delay: 0.35s; }
    .hero-waveform .bar:nth-child(9)  { height: 14px; animation-delay: 0.2s; }
    .hero-waveform .bar:nth-child(10) { height: 28px; animation-delay: 0.08s; }
    .hero-waveform .bar:nth-child(11) { height: 20px; animation-delay: 0.28s; }
    .hero-waveform .bar:nth-child(12) { height: 10px; animation-delay: 0.18s; }
    .hero-waveform .bar:nth-child(13) { height: 26px; animation-delay: 0.38s; }
    .hero-waveform .bar:nth-child(14) { height: 14px; animation-delay: 0.12s; }
    .hero-waveform .bar:nth-child(15) { height: 8px;  animation-delay: 0.22s; }
    @keyframes waveBar {
      from { transform: scaleY(1); opacity: 0.5; }
      to   { transform: scaleY(0.3); opacity: 0.9; }
    }

    .scroll-cue {
      position: absolute; bottom: 3rem; left: 50%;
      transform: translateX(-50%);
      display: flex; flex-direction: column; align-items: center; gap: 0.5rem;
      opacity: 0; animation: heroFade 1s ease 1.8s forwards; z-index: 1;
    }
    .scroll-cue span {
      font-family: 'Cinzel', serif; font-size: 0.58rem;
      letter-spacing: 0.3em; color: var(--text-light); text-transform: uppercase;
    }
    .scroll-line {
      width: 1px; height: 40px;
      background: linear-gradient(to bottom, rgba(180,160,220,0.5), transparent);
      animation: scrollPulse 2s ease-in-out infinite;
    }
    @keyframes heroFade {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    @keyframes scrollPulse {
      0%,100% { opacity: 0.3; transform: scaleY(1); }
      50%      { opacity: 1;   transform: scaleY(1.15); }
    }

    /* ── GALLERY ── */
    .lyrics-gallery { padding: 0 2rem 20vh; }
    .gallery-inner  { max-width: 720px; margin: 0 auto; }

    /* ═══════════════════════════════════════════
       DIVIDER — upgraded to triple-diamond
    ═══════════════════════════════════════════ */
    .divider {
      display: flex; align-items: center; gap: 1rem;
      margin: 0 auto 8vh; max-width: 720px; padding: 0 2rem;
    }
    .divider-line {
      flex: 1; height: 1px;
      background: linear-gradient(to right, transparent, rgba(185,170,220,0.5), transparent);
    }
    .divider-ornament {
      display: flex; align-items: center; gap: 6px;
    }
    .divider-diamond {
      width: 5px; height: 5px;
      background: rgba(185,170,220,0.5); transform: rotate(45deg);
      transition: background 0.3s;
    }
    .divider-diamond.small {
      width: 3px; height: 3px;
      background: rgba(185,170,220,0.28);
    }

    /* ── VERSE PULSE ── */
    .verse-pulse {
      display: block; width: 100%; height: 1px;
      margin: 0 0 6vh; position: relative; overflow: visible;
      opacity: 0; transform: scaleX(0);
      transition: opacity 0.6s ease, transform 0.8s cubic-bezier(0.22,1,0.36,1);
    }
    .verse-pulse.in-view { opacity: 1; transform: scaleX(1); }
    .verse-pulse::before {
      content: '';
      display: block; height: 1px;
      background: linear-gradient(to right,
        transparent 0%, rgba(255,210,235,0.8) 15%,
        rgba(210,195,255,0.9) 35%, rgba(195,225,255,0.95) 50%,
        rgba(210,245,225,0.9) 65%, rgba(255,215,240,0.8) 85%, transparent 100%);
      box-shadow:
        0 0 12px 3px rgba(220,200,255,0.45),
        0 0 30px 6px rgba(210,190,255,0.2);
      animation: pulseGlow 3s ease-in-out infinite alternate;
    }
    .verse-pulse::after {
      content: '✦'; position: absolute; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      font-size: 0.55rem; color: rgba(200,185,240,0.7); line-height: 1;
    }
    @keyframes pulseGlow {
      from { box-shadow: 0 0 8px 2px rgba(220,200,255,0.3),  0 0 20px 4px rgba(210,190,255,0.15); }
      to   { box-shadow: 0 0 20px 6px rgba(220,200,255,0.6), 0 0 50px 12px rgba(210,190,255,0.3); }
    }

    /* ── VERSE ── */
    .verse { margin-bottom: 2vh; scroll-margin-top: 5rem; }

    /* ═══════════════════════════════════════════
       SECTION LABEL — now with flanking lines
    ═══════════════════════════════════════════ */
    .section-label-wrap {
      display: flex; align-items: center; gap: 1rem;
      margin-bottom: 2.5rem;
      opacity: 0; transform: translateY(16px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .section-label-wrap.in-view { opacity: 1; transform: translateY(0); }
    .section-label {
      font-family: 'Cinzel', serif; font-size: 0.6rem;
      letter-spacing: 0.35em; color: var(--text-light);
      text-transform: uppercase;
      white-space: nowrap;
    }
    .label-line {
      flex: 1; height: 1px;
      background: linear-gradient(to right, rgba(185,170,220,0.35), transparent);
    }
    .label-line.left {
      background: linear-gradient(to left, rgba(185,170,220,0.35), transparent);
      max-width: 24px; flex: none;
    }
    /* Legacy .section-label for non-wrapped use */
    span.section-label {
      font-family: 'Cinzel', serif; font-size: 0.6rem;
      letter-spacing: 0.35em; color: var(--text-light);
      text-transform: uppercase; margin-bottom: 2.5rem;
      display: block; opacity: 0; transform: translateY(16px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    span.section-label.in-view { opacity: 1; transform: translateY(0); }

    /* ═══════════════════════════════════════════
       LYRIC LINES — enhanced hover with underline draw
    ═══════════════════════════════════════════ */
    .lyric-line {
      display: block; position: relative;
      font-size: clamp(1.4rem, 3.5vw, 2.4rem);
      font-weight: 300; line-height: 1.6; letter-spacing: 0.01em;
      color: var(--text-dark);
      text-shadow: 0 0 30px rgba(255,240,255,0.8);
      margin-bottom: 0.2em;
      opacity: 0;
      will-change: opacity, transform;
      transition:
        opacity 0.85s cubic-bezier(0.25,0.46,0.45,0.94),
        transform 0.85s cubic-bezier(0.25,0.46,0.45,0.94),
        color 0.35s ease,
        text-shadow 0.4s ease;
    }

    /* NEW: fine underline that draws in from left on hover */
    .lyric-line::after {
      content: '';
      position: absolute; bottom: 2px; left: 0;
      width: 0%; height: 1px;
      background: linear-gradient(to right,
        rgba(210,190,255,0.6), rgba(190,220,255,0.4), rgba(210,190,255,0.2));
      transition: width 0.55s cubic-bezier(0.22,1,0.36,1);
    }
    .lyric-line:hover::after { width: 100%; }
    .lyric-line:hover {
      text-shadow:
        0 0 20px rgba(255,210,240,0.9),
        0 0 50px rgba(215,195,255,0.7),
        0 0 90px rgba(195,225,255,0.4);
      color: var(--text-mid);
    }
    .lyric-line.italic { font-style: italic; }

    .lyric-line.enter-left  { transform: translateX(-36px) translateY(8px); }
    .lyric-line.enter-right { transform: translateX(36px) translateY(8px); }
    .lyric-line.enter-scale { transform: translateY(22px) scale(0.94); }
    .lyric-line.enter-up    { transform: translateY(40px); }
    .lyric-line.enter-fade  { transform: translateY(12px); }

    .lyric-line.in-view {
      opacity: 1 !important;
      transform: translateX(0) translateY(0) scale(1) !important;
    }

    /* chorus */
    .verse.chorus .lyric-line {
      color: var(--text-mid);
      font-size: clamp(1.6rem, 4vw, 2.8rem);
      letter-spacing: 0.03em;
      text-shadow: 0 0 50px rgba(255,230,255,0.9), 0 0 80px rgba(220,200,255,0.4);
    }

    /* drop cap */
    .lyric-line.drop-cap::first-letter {
      font-size: 4.5em; line-height: 0.75;
      float: left; margin: 0.06em 0.08em 0 0;
      color: var(--text-mid); font-style: italic;
      text-shadow: 0 0 40px rgba(220,195,255,0.7);
    }

    .verse.chorus .lyric-line.italic {
      font-size: clamp(1.1rem, 2.8vw, 1.9rem);
      color: var(--text-light); letter-spacing: 0.06em;
      text-shadow: 0 0 30px rgba(220,205,255,0.5);
      padding-left: 1.8rem;
    }

    /* ═══════════════════════════════════════════
       PLACARD — animated gradient border
    ═══════════════════════════════════════════ */
    .placard-wrapper {
      margin: 18vh auto 0; max-width: 420px;
      transform: translateY(30px) rotate(-0.4deg);
      opacity: 0;
      transition: opacity 1.1s ease, transform 1.1s cubic-bezier(0.22,1,0.36,1);
    }
    .placard-wrapper.in-view {
      opacity: 1;
      transform: translateY(0) rotate(-0.4deg);
    }

    /* NEW: glowing border wrapper */
    .placard-border {
      padding: 2px; border-radius: 2px;
      background: linear-gradient(135deg,
        rgba(212,196,160,0.9) 0%,
        rgba(200,185,240,0.6) 30%,
        rgba(185,215,255,0.5) 55%,
        rgba(210,240,220,0.55) 75%,
        rgba(212,196,160,0.9) 100%);
      background-size: 300% 300%;
      animation: placardBorderAnim 8s ease-in-out infinite;
    }
    @keyframes placardBorderAnim {
      0%   { background-position: 0% 50%; }
      50%  { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .placard {
      padding: 2.8rem 2.5rem;
      background:
        radial-gradient(ellipse 80% 60% at 30% 20%, rgba(255,252,255,0.8) 0%, transparent 70%),
        rgba(252, 249, 255, 0.88);
      backdrop-filter: blur(20px) saturate(1.3);
      -webkit-backdrop-filter: blur(20px) saturate(1.3);
      box-shadow:
        0 1px 2px  rgba(120,100,160,0.10),
        0 4px 12px rgba(140,115,185,0.12),
        0 12px 35px rgba(160,130,210,0.10),
        0 25px 60px rgba(180,150,230,0.08),
        inset 0 1px 0 rgba(255,255,255,0.9);
      position: relative;
    }
    /* dog-ear */
    .placard::after {
      content: ''; position: absolute; bottom: 0; right: 0;
      width: 18px; height: 18px;
      background: linear-gradient(225deg,
        rgba(210,195,235,0.6) 0%, rgba(240,235,250,0.3) 50%, transparent 100%);
      border-top: 1px solid rgba(200,185,225,0.4);
      border-left: 1px solid rgba(200,185,225,0.4);
    }
    .placard-number {
      font-family: 'Cinzel', serif; font-size: 0.52rem;
      letter-spacing: 0.4em; color: var(--text-light);
      text-transform: uppercase; margin-bottom: 1.4rem; opacity: 0.7;
    }
    .placard-title {
      font-size: 1.5rem; font-weight: 300; font-style: italic;
      letter-spacing: 0.03em; color: var(--text-dark); margin-bottom: 0.5rem;
    }
    .placard-artist {
      font-family: 'Cinzel', serif; font-size: 0.66rem;
      letter-spacing: 0.22em; color: var(--text-mid);
      text-transform: uppercase; margin-bottom: 0.35rem;
    }
    .placard-year {
      font-size: 0.82rem; color: var(--text-light); letter-spacing: 0.08em;
    }
    .placard-rule {
      width: 36px; height: 1px;
      background: linear-gradient(to right, rgba(200,185,150,0.8), rgba(200,185,150,0.2));
      margin: 1.3rem 0;
    }
    .placard-desc {
      font-size: 0.875rem; line-height: 1.75;
      color: var(--text-mid); font-style: italic;
    }

    /* ═══════════════════════════════════════════
       TRACK NUMBER SIDEBAR — NEW
       Subtle fixed track indicator on large screens
    ═══════════════════════════════════════════ */
    #track-label {
      position: fixed;
      left: 1.8rem; top: 50%;
      transform: translateY(-50%) rotate(-90deg);
      transform-origin: center center;
      font-family: 'Cinzel', serif; font-size: 0.52rem;
      letter-spacing: 0.38em; color: rgba(152,136,187,0.35);
      text-transform: uppercase; white-space: nowrap;
      pointer-events: none; z-index: 100;
      opacity: 0; transition: opacity 1s ease;
    }
    #track-label.visible { opacity: 1; }
    @media (max-width: 900px) { #track-label { display: none; } }

    /* ── BACK TO TOP ── */
    #back-to-top {
      position: fixed; bottom: 2.2rem; right: 2.2rem; z-index: 500;
      width: 42px; height: 42px;
      display: flex; align-items: center; justify-content: center;
      border-radius: 50%;
      background: rgba(248,244,255,0.45);
      backdrop-filter: blur(12px) saturate(1.4);
      -webkit-backdrop-filter: blur(12px) saturate(1.4);
      border: 1px solid rgba(210,195,240,0.4);
      box-shadow:
        0 2px 10px rgba(170,145,215,0.15),
        0 0 30px rgba(200,180,255,0.10),
        inset 0 1px 0 rgba(255,255,255,0.8);
      color: var(--text-light); font-size: 0.9rem;
      opacity: 0; transform: translateY(10px) scale(0.9);
      pointer-events: none;
      transition:
        opacity 0.6s cubic-bezier(0.22,1,0.36,1),
        transform 0.6s cubic-bezier(0.22,1,0.36,1),
        background 0.3s ease, box-shadow 0.3s ease;
      animation: bttPulse 3.5s ease-in-out infinite;
    }
    #back-to-top.visible {
      opacity: 1; transform: translateY(0) scale(1); pointer-events: all;
    }
    #back-to-top:hover {
      background: rgba(248,244,255,0.72);
      box-shadow:
        0 4px 20px rgba(170,145,215,0.25),
        0 0 50px rgba(200,180,255,0.2),
        inset 0 1px 0 rgba(255,255,255,0.9);
      transform: translateY(-2px) scale(1.05);
    }
    #back-to-top svg {
      width: 14px; height: 14px; stroke: var(--text-light);
      stroke-width: 1.5; fill: none;
      stroke-linecap: round; stroke-linejoin: round;
      transition: stroke 0.3s ease;
    }
    #back-to-top:hover svg { stroke: var(--text-mid); }
    @keyframes bttPulse {
      0%,100% { box-shadow: 0 2px 10px rgba(170,145,215,0.15), 0 0 30px rgba(200,180,255,0.10), inset 0 1px 0 rgba(255,255,255,0.8); }
      50%      { box-shadow: 0 2px 10px rgba(170,145,215,0.22), 0 0 50px rgba(200,180,255,0.22), inset 0 1px 0 rgba(255,255,255,0.9); }
    }

    /* ── FOOTER ── */
    .gallery-footer {
      text-align: center; padding: 6rem 2rem 4rem;
      font-family: 'Cinzel', serif; font-size: 0.6rem;
      letter-spacing: 0.3em; color: var(--text-light);
      text-transform: uppercase; opacity: 0.55;
    }

    /* NEW: exhibition close stamp */
    .footer-stamp {
      display: inline-block;
      border: 1px solid rgba(185,170,220,0.22);
      padding: 0.7rem 1.4rem;
      margin-bottom: 1.8rem;
      font-size: 0.52rem; letter-spacing: 0.38em;
      color: rgba(152,136,187,0.4);
      font-family: 'Cinzel', serif;
      text-transform: uppercase;
      transform: rotate(-1.2deg);
    }

    @media (max-width: 600px) {
      .museum-header { padding: 1.2rem 1.5rem; }
      .lyrics-gallery { padding: 0 1.2rem 16vh; }
    }
  </style>
</head>
<body>

<!-- SVG Filters -->
<svg id="svg-filters" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <filter id="ripple" x="-20%" y="-20%" width="140%" height="140%">
      <feTurbulence type="turbulence" baseFrequency="0.012 0.018" numOctaves="4" seed="2" result="turb">
        <animate attributeName="baseFrequency" values="0.012 0.018;0.015 0.012;0.010 0.020;0.012 0.018" dur="20s" repeatCount="indefinite"/>
        <animate attributeName="seed" values="2;5;8;2" dur="25s" repeatCount="indefinite"/>
      </feTurbulence>
      <feDisplacementMap in="SourceGraphic" in2="turb" scale="45" xChannelSelector="R" yChannelSelector="G"/>
    </filter>
    <filter id="ripple2" x="-20%" y="-20%" width="140%" height="140%">
      <feTurbulence type="turbulence" baseFrequency="0.018 0.010" numOctaves="3" seed="7" result="turb2">
        <animate attributeName="baseFrequency" values="0.018 0.010;0.010 0.015;0.020 0.012;0.018 0.010" dur="18s" repeatCount="indefinite"/>
      </feTurbulence>
      <feDisplacementMap in="SourceGraphic" in2="turb2" scale="35" xChannelSelector="G" yChannelSelector="R"/>
    </filter>
    <filter id="ripple3" x="-20%" y="-20%" width="140%" height="140%">
      <feTurbulence type="fractalNoise" baseFrequency="0.008 0.022" numOctaves="5" seed="13" result="turb3">
        <animate attributeName="baseFrequency" values="0.008 0.022;0.022 0.010;0.014 0.016;0.008 0.022" dur="22s" repeatCount="indefinite"/>
      </feTurbulence>
      <feDisplacementMap in="SourceGraphic" in2="turb3" scale="55" xChannelSelector="R" yChannelSelector="B"/>
    </filter>
  </defs>
</svg>

<!-- Cursor -->
<div id="cursor-orb"></div>
<div id="cursor-trail"></div>

<!-- Progress bar -->
<div id="progress-bar"></div>

<!-- Background layers -->
<div class="bg-water"      id="bg-water"      aria-hidden="true"></div>
<div class="bg-silver"     aria-hidden="true"></div>
<div class="bg-caustics"   id="bg-caustics"   aria-hidden="true"></div>
<div class="bg-iridescent" id="bg-iridescent" aria-hidden="true"></div>
<div class="bg-hueshift"   aria-hidden="true"></div>
<div class="bg-glow"       aria-hidden="true"></div>

<!-- NEW: grain + vignette overlays -->
<div id="grain-overlay" aria-hidden="true"></div>
<div id="vignette"      aria-hidden="true"></div>

<!-- Particles -->
<canvas id="particles-canvas" aria-hidden="true"></canvas>

<!-- ══════════════════════════════════════════
     SPLASH SCREEN
══════════════════════════════════════════ -->
<div id="splash" role="dialog" aria-label="Gallery entrance">
  <div id="splash-ring" aria-hidden="true"></div>
  <p class="splash-eyebrow">The Lyric Gallery &nbsp;·&nbsp; Permanent Collection</p>
  <h1 class="splash-title">Don't Smile</h1>
  <p class="splash-sub">Sabrina Carpenter &nbsp;·&nbsp; 2024</p>
  <button class="splash-enter" id="enter-btn">Enter Gallery</button>
</div>

<!-- ══════════════════════════════════════════
     MAIN PAGE
══════════════════════════════════════════ -->
<div id="page">

  <!-- Fixed track label sidebar -->
  <div id="track-label" aria-hidden="true">Track 12 &nbsp;·&nbsp; Short n' Sweet &nbsp;·&nbsp; 2024</div>

  <header class="museum-header">
    <span class="museum-name">The Lyric Gallery</span>
    <div class="header-rule"></div>
    <span class="header-nav">Permanent Collection</span>
  </header>

  <section class="hero">
    <div class="hero-aurora" aria-hidden="true"></div>
    <p class="exhibit-label">Exhibit No. 001 &nbsp;·&nbsp; Auditory Works</p>
    <h2 class="hero-title">Don't Smile</h2>
    <div class="hero-divider"></div>
    <p class="hero-artist">Sabrina Carpenter</p>
    <p class="hero-year">2024 &ensp;·&ensp; Short n' Sweet</p>
    <!-- NEW: waveform accent -->
    <div class="hero-waveform" aria-hidden="true">
      <div class="bar"></div><div class="bar"></div><div class="bar"></div>
      <div class="bar"></div><div class="bar"></div><div class="bar"></div>
      <div class="bar"></div><div class="bar"></div><div class="bar"></div>
      <div class="bar"></div><div class="bar"></div><div class="bar"></div>
      <div class="bar"></div><div class="bar"></div><div class="bar"></div>
    </div>
    <div class="scroll-cue">
      <span>View Work</span>
      <div class="scroll-line"></div>
    </div>
  </section>

  <section class="lyrics-gallery">

    <!-- Upgraded triple-diamond divider -->
    <div class="divider">
      <div class="divider-line"></div>
      <div class="divider-ornament">
        <div class="divider-diamond small"></div>
        <div class="divider-diamond"></div>
        <div class="divider-diamond small"></div>
      </div>
      <div class="divider-line"></div>
    </div>

    <div class="gallery-inner">

      <!-- ── CHORUS (opening) ── -->
      <div class="verse chorus" id="chorus-opening">
        <div class="section-label-wrap">
          <div class="label-line left"></div>
          <span class="section-label">Chorus</span>
          <div class="label-line"></div>
        </div>
        <span class="lyric-line enter-up">Don't smile because it happened, baby</span>
        <span class="lyric-line enter-up">Cry because it's over</span>
        <span class="lyric-line enter-up">Oh, you're supposed to think about me</span>
        <span class="lyric-line enter-up">Every time you hold her</span>
      </div>

      <span class="verse-pulse"></span>

      <!-- ── VERSE I ── -->
      <div class="verse">
        <div class="section-label-wrap">
          <div class="label-line left"></div>
          <span class="section-label">Verse I</span>
          <div class="label-line"></div>
        </div>
        <span class="lyric-line enter-up">My heart is heavy now, it's like a hundred pounds</span>
        <span class="lyric-line enter-right">It's fallin' faster than the way you love to shut me down</span>
        <span class="lyric-line enter-left">I think I need a shower, my friends are takin' shots</span>
        <span class="lyric-line enter-right">You think it's happy hour, for me, it's not</span>
      </div>

      <span class="verse-pulse"></span>

      <!-- ── CHORUS (full) ── -->
      <div class="verse chorus">
        <div class="section-label-wrap">
          <div class="label-line left"></div>
          <span class="section-label">Chorus</span>
          <div class="label-line"></div>
        </div>
        <span class="lyric-line enter-up">Don't smile because it happened, baby</span>
        <span class="lyric-line enter-up">Cry because it's over</span>
        <span class="lyric-line enter-up">Oh, you're supposed to think about me</span>
        <span class="lyric-line enter-up">Every time you hold her</span>
        <span class="lyric-line enter-fade">Don't smile becausе it happened, baby</span>
        <span class="lyric-line enter-fade">Cry becausе it's over</span>
        <span class="lyric-line enter-fade italic">(I want you to miss me, I want you to miss me)</span>
        <span class="lyric-line enter-fade">Oh, you're supposed to think about me</span>
        <span class="lyric-line enter-fade">Every time you hold her</span>
        <span class="lyric-line enter-fade italic">(I want you to miss me, I want you to miss me)</span>
      </div>

      <span class="verse-pulse"></span>

      <!-- ── VERSE II ── -->
      <div class="verse">
        <div class="section-label-wrap">
          <div class="label-line left"></div>
          <span class="section-label">Verse II</span>
          <div class="label-line"></div>
        </div>
        <span class="lyric-line enter-scale">Pour my feelings in the microphone</span>
        <span class="lyric-line enter-fade">I stay in, and when the girls come home</span>
        <span class="lyric-line enter-scale">I want one of them to take my phone</span>
        <span class="lyric-line enter-left italic">Take my phone and lose your</span>
        <span class="lyric-line enter-right">Number, I don't wanna be tempted</span>
        <span class="lyric-line enter-scale">Pick up when you wanna fall back in</span>
        <span class="lyric-line enter-fade">You can fake it, but you know I know</span>
        <span class="lyric-line enter-fade">Know I know</span>
      </div>

      <span class="verse-pulse"></span>

      <!-- ── CHORUS (final) ── -->
      <div class="verse chorus">
        <div class="section-label-wrap">
          <div class="label-line left"></div>
          <span class="section-label">Chorus</span>
          <div class="label-line"></div>
        </div>
        <span class="lyric-line enter-up">Don't smile because it happened, baby (Don't, oh)</span>
        <span class="lyric-line enter-up">Cry because it's over (No, mm, no, no)</span>
        <span class="lyric-line enter-up">Oh, you're supposed to think about me</span>
        <span class="lyric-line enter-up">Every time you hold her (Mm)</span>
        <span class="lyric-line enter-fade">Don't smile because it happened, baby</span>
        <span class="lyric-line enter-fade">Cry because it's over (Ooh)</span>
        <span class="lyric-line enter-fade italic">(I want you to miss me, I want you to miss me)</span>
        <span class="lyric-line enter-fade">Oh, you're supposed to think about me</span>
        <span class="lyric-line enter-fade">Every time you hold her</span>
        <span class="lyric-line enter-fade italic">(I want you to miss me, I want you to miss me)</span>
      </div>

      <!-- PLACARD — now with animated gradient border -->
      <div class="placard-wrapper" id="placard">
        <div class="placard-border">
          <div class="placard">
            <p class="placard-number">Exhibit 001 &nbsp;·&nbsp; Track 12</p>
            <p class="placard-artist">Sabrina Carpenter</p>
            <h2 class="placard-title">Don't Smile</h2>
            <p class="placard-year">2024 &ensp;·&ensp; Short n' Sweet</p>
            <div class="placard-rule"></div>
            <p class="placard-desc">
              There is a phrase stitched onto pillows and pinned across a thousand
              mood boards: <em>don't cry because it's over — smile because it happened.</em>
              Sabrina Carpenter rejected it entirely. What this song offers instead is
              something rarer and more honest — permission to grieve loudly, to want to
              be missed, to refuse the tidy resolution that heartbreak is supposed to
              arrive at. Opening on its own chorus, the song withholds the story
              before delivering the feeling, placing the ache before the explanation.
              The closing track on <em>Short n' Sweet</em>, it ends the album not with
              triumph but with longing still suspended in the air — unresolved,
              undecorated, and completely true.
            </p>
          </div>
        </div>
      </div>

    </div>
  </section>

  <footer class="gallery-footer">
    <div class="footer-stamp">End of Exhibition</div><br>
    &copy; The Lyric Gallery &nbsp;·&nbsp; All rights reserved
  </footer>

</div>

<button id="back-to-top" aria-label="Return to top of gallery" title="Return to top">
  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <polyline points="18 15 12 9 6 15"/>
  </svg>
</button>

<script>
/* ════════════════════════════════════════════
   1. SPLASH → PAGE TRANSITION
════════════════════════════════════════════ */
const splash   = document.getElementById('splash');
const page     = document.getElementById('page');
const enterBtn = document.getElementById('enter-btn');
const trackLbl = document.getElementById('track-label');

enterBtn.addEventListener('click', () => {
  splash.classList.add('hidden');
  setTimeout(() => {
    page.classList.add('visible');
    setTimeout(() => trackLbl.classList.add('visible'), 1800);
  }, 600);
});

/* ════════════════════════════════════════════
   2. CUSTOM CURSOR
════════════════════════════════════════════ */
const orb   = document.getElementById('cursor-orb');
const trail = document.getElementById('cursor-trail');

document.addEventListener('mousemove', e => {
  orb.style.left   = e.clientX + 'px';
  orb.style.top    = e.clientY + 'px';
  trail.style.left = e.clientX + 'px';
  trail.style.top  = e.clientY + 'px';
});

document.addEventListener('mouseover', e => {
  if (e.target.classList.contains('lyric-line') ||
      e.target.tagName === 'BUTTON') {
    orb.classList.add('hovered');
  }
});
document.addEventListener('mouseout', e => {
  if (e.target.classList.contains('lyric-line') ||
      e.target.tagName === 'BUTTON') {
    orb.classList.remove('hovered');
  }
});

/* ════════════════════════════════════════════
   3. SCROLL PROGRESS BAR
════════════════════════════════════════════ */
const bar = document.getElementById('progress-bar');
window.addEventListener('scroll', () => {
  const total = document.documentElement.scrollHeight - window.innerHeight;
  bar.style.width = (total > 0 ? (window.scrollY / total) * 100 : 0) + '%';
}, { passive: true });

/* ════════════════════════════════════════════
   ANIMATION STATE
════════════════════════════════════════════ */
let animationsPaused = false;
let parallaxRafId = null, particleRafId = null;

document.addEventListener('visibilitychange', () => {
  if (document.hidden) {
    animationsPaused = true;
    if (parallaxRafId) { cancelAnimationFrame(parallaxRafId); parallaxRafId = null; }
    if (particleRafId) { cancelAnimationFrame(particleRafId); particleRafId = null; }
  } else {
    animationsPaused = false;
    startParallax();
    startParticles();
  }
});

/* ════════════════════════════════════════════
   4. MOUSE PARALLAX
════════════════════════════════════════════ */
const bgWater   = document.getElementById('bg-water');
const bgCaustic = document.getElementById('bg-caustics');
const bgIrid    = document.getElementById('bg-iridescent');
let targetX = 0, targetY = 0, currentX = 0, currentY = 0;

document.addEventListener('mousemove', e => {
  targetX = (e.clientX / window.innerWidth  - 0.5) * 2;
  targetY = (e.clientY / window.innerHeight - 0.5) * 2;
});

function animateParallax() {
  currentX += (targetX - currentX) * 0.04;
  currentY += (targetY - currentY) * 0.04;
  const w = currentX, h = currentY;
  bgWater.style.transform   = `translate(${w * 14}px, ${h * 10}px) scale(1.04)`;
  bgCaustic.style.transform = `translate(${w * 22}px, ${h * 16}px) scale(1.06)`;
  bgIrid.style.transform    = `translate(${w * 10}px, ${h *  8}px) scale(1.03)`;
  parallaxRafId = requestAnimationFrame(animateParallax);
}
function startParallax() {
  if (!parallaxRafId) parallaxRafId = requestAnimationFrame(animateParallax);
}
startParallax();

/* ════════════════════════════════════════════
   5. PARTICLES — mix of orbs + tiny sparkles
════════════════════════════════════════════ */
const canvas = document.getElementById('particles-canvas');
const ctx    = canvas.getContext('2d');
let W, H, particles = [];

function resizeCanvas() {
  W = canvas.width  = window.innerWidth;
  H = canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas, { passive: true });

const PALETTE = [
  [255,220,240],[210,195,255],[195,225,255],
  [210,245,230],[255,240,215],[255,255,255],[230,220,255],
];

function makeParticle(type = 'orb') {
  const col = PALETTE[Math.floor(Math.random() * PALETTE.length)];
  if (type === 'sparkle') {
    return {
      type: 'sparkle',
      x: Math.random() * W,
      y: Math.random() * H,
      size: 1 + Math.random() * 2,
      opacity: 0, maxOp: 0.4 + Math.random() * 0.5,
      fadeIn: true,
      lifespan: 60 + Math.random() * 120,
      age: 0, col,
    };
  }
  return {
    type: 'orb',
    x: Math.random() * W, y: H + Math.random() * 120,
    r: 1.2 + Math.random() * 4.5,
    speed: 0.18 + Math.random() * 0.55,
    drift: (Math.random() - 0.5) * 0.4,
    opacity: 0.15 + Math.random() * 0.55,
    opSpeed: 0.003 + Math.random() * 0.006, opDir: 1,
    col, glow: 4 + Math.random() * 12,
    phase: Math.random() * Math.PI * 2,
    wobble: 0.3 + Math.random() * 0.7,
  };
}

// Mix of orbs and sparkles
for (let i = 0; i < 55; i++) {
  const p = makeParticle('orb');
  p.y = Math.random() * H;
  particles.push(p);
}
for (let i = 0; i < 30; i++) {
  particles.push(makeParticle('sparkle'));
}

function drawParticles(t) {
  ctx.clearRect(0, 0, W, H);

  for (let i = particles.length - 1; i >= 0; i--) {
    const p = particles[i];

    if (p.type === 'sparkle') {
      p.age++;
      if (p.fadeIn) {
        p.opacity = Math.min(p.maxOp, p.opacity + 0.015);
        if (p.opacity >= p.maxOp) p.fadeIn = false;
      } else {
        p.opacity -= 0.008;
      }
      if (p.age > p.lifespan || p.opacity <= 0) {
        particles[i] = makeParticle('sparkle');
        continue;
      }
      const [r,g,b] = p.col;
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(${r},${g},${b},${p.opacity})`;
      ctx.shadowBlur = 6;
      ctx.shadowColor = `rgba(${r},${g},${b},${p.opacity * 0.5})`;
      ctx.fill();
      ctx.shadowBlur = 0;
      continue;
    }

    // orb
    const wx = Math.sin(t * 0.0006 * p.wobble + p.phase) * 28;
    p.opacity += p.opSpeed * p.opDir;
    if (p.opacity > 0.65 || p.opacity < 0.08) p.opDir *= -1;
    p.y -= p.speed;
    p.x += p.drift;
    const [r,g,b] = p.col;
    const grad = ctx.createRadialGradient(p.x+wx, p.y, 0, p.x+wx, p.y, p.r+p.glow);
    grad.addColorStop(0,   `rgba(${r},${g},${b},${p.opacity})`);
    grad.addColorStop(0.4, `rgba(${r},${g},${b},${p.opacity*0.5})`);
    grad.addColorStop(1,   `rgba(${r},${g},${b},0)`);
    ctx.beginPath();
    ctx.arc(p.x+wx, p.y, p.r+p.glow, 0, Math.PI*2);
    ctx.fillStyle = grad; ctx.fill();
    ctx.beginPath();
    ctx.arc(p.x+wx - p.r*0.3, p.y - p.r*0.3, p.r*0.4, 0, Math.PI*2);
    ctx.fillStyle = `rgba(255,255,255,${p.opacity*0.7})`; ctx.fill();
    if (p.y < -20 || p.x < -50 || p.x > W+50) Object.assign(p, makeParticle('orb'));
  }
}

function particleLoop(t) {
  drawParticles(t);
  particleRafId = requestAnimationFrame(particleLoop);
}
function startParticles() {
  if (!particleRafId) particleRafId = requestAnimationFrame(particleLoop);
}
startParticles();

/* ════════════════════════════════════════════
   6. SCROLL REVEAL
════════════════════════════════════════════ */
const revealEls = document.querySelectorAll(
  '.lyric-line, .section-label, .section-label-wrap, .placard-wrapper, .verse-pulse'
);

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (!entry.isIntersecting) return;
    const el = entry.target;
    if (el.classList.contains('lyric-line')) {
      const siblings = [...el.parentElement.querySelectorAll('.lyric-line')];
      const idx = siblings.indexOf(el);
      setTimeout(() => el.classList.add('in-view'), idx * 130);
    } else {
      el.classList.add('in-view');
    }
    observer.unobserve(el);
  });
}, { threshold: 0.15, rootMargin: '0px 0px -60px 0px' });

revealEls.forEach(el => observer.observe(el));

/* ════════════════════════════════════════════
   7. BACK TO TOP
════════════════════════════════════════════ */
const btt = document.getElementById('back-to-top');
window.addEventListener('scroll', () => {
  const scrolled = window.scrollY / (document.documentElement.scrollHeight - window.innerHeight);
  btt.classList.toggle('visible', scrolled > 0.5);
}, { passive: true });
btt.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

/* ════════════════════════════════════════════
   8. LYRIC LINE SUBTLE SCROLL PARALLAX (NEW)
   Each line drifts a hair on scroll for depth.
════════════════════════════════════════════ */
const lyricLines = document.querySelectorAll('.lyric-line');
let ticking = false;

function applyLyricParallax() {
  const cy = window.scrollY + window.innerHeight / 2;
  lyricLines.forEach(line => {
    if (!line.classList.contains('in-view')) return;
    const rect  = line.getBoundingClientRect();
    const lineY = window.scrollY + rect.top + rect.height / 2;
    const dist  = (lineY - cy) / window.innerHeight;
    // Very subtle — just a 5px drift to add perception of depth
    line.style.setProperty('--parallax-y', `${dist * 5}px`);
  });
  ticking = false;
}
window.addEventListener('scroll', () => {
  if (!ticking) {
    requestAnimationFrame(applyLyricParallax);
    ticking = true;
  }
}, { passive: true });
</script>

</body>
</html>
